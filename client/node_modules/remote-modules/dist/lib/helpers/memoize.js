"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = memoize;

var _defineProperties = _interopRequireDefault(require("./defineProperties"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @typedef Map
 * @see [Map | MDN]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map}
 */

/**
 * @typedef {function} defaultResolver
 * @return {?} The first argument
 */
const defaultResolver = (...args) => args[0];
/**
 * Creates a function that caches the value returned by {@code fn}
 * @since 0.1.0
 *
 * @param {function} fn - The function to memoize
 * @param {function} [resolver=[defaultResolver]{@link module:memoize~defaultResolver}] - A function that returns the cache key
 * @param {Map} [cache=[Map]{@link module:memoize~Map}] - A {@code Map}, or any object that implements the [Map]{@link module:memoize~Map} interface
 * @return {function}
 */


function memoize(fn, resolver = defaultResolver, cache = new Map()) {
  return (0, _defineProperties.default)((...args) => {
    const key = resolver(...args);
    let value;

    if (cache.has(key)) {
      value = cache.get(key);
    } else {
      value = fn(...args);
      cache.set(key, value);
    }

    return value;
  }, {
    cache,
    resolver
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvaGVscGVycy9tZW1vaXplLmpzIl0sIm5hbWVzIjpbImRlZmF1bHRSZXNvbHZlciIsImFyZ3MiLCJtZW1vaXplIiwiZm4iLCJyZXNvbHZlciIsImNhY2hlIiwiTWFwIiwia2V5IiwidmFsdWUiLCJoYXMiLCJnZXQiLCJzZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVBOzs7OztBQUtBOzs7O0FBSUEsTUFBTUEsZUFBZSxHQUFHLENBQUMsR0FBR0MsSUFBSixLQUFhQSxJQUFJLENBQUMsQ0FBRCxDQUF6QztBQUVBOzs7Ozs7Ozs7OztBQVNlLFNBQVNDLE9BQVQsQ0FBaUJDLEVBQWpCLEVBQXFCQyxRQUFRLEdBQUdKLGVBQWhDLEVBQWlESyxLQUFLLEdBQUcsSUFBSUMsR0FBSixFQUF6RCxFQUFvRTtBQUNsRixTQUFPLCtCQUNOLENBQUMsR0FBR0wsSUFBSixLQUFhO0FBQ1osVUFBTU0sR0FBRyxHQUFHSCxRQUFRLENBQUMsR0FBR0gsSUFBSixDQUFwQjtBQUNBLFFBQUlPLEtBQUo7O0FBQ0EsUUFBSUgsS0FBSyxDQUFDSSxHQUFOLENBQVVGLEdBQVYsQ0FBSixFQUFvQjtBQUNuQkMsTUFBQUEsS0FBSyxHQUFHSCxLQUFLLENBQUNLLEdBQU4sQ0FBVUgsR0FBVixDQUFSO0FBQ0EsS0FGRCxNQUVPO0FBQ05DLE1BQUFBLEtBQUssR0FBR0wsRUFBRSxDQUFDLEdBQUdGLElBQUosQ0FBVjtBQUNBSSxNQUFBQSxLQUFLLENBQUNNLEdBQU4sQ0FBVUosR0FBVixFQUFlQyxLQUFmO0FBQ0E7O0FBQ0QsV0FBT0EsS0FBUDtBQUNBLEdBWEssRUFZTjtBQUFFSCxJQUFBQSxLQUFGO0FBQVNELElBQUFBO0FBQVQsR0FaTSxDQUFQO0FBY0EiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lUHJvcGVydGllcyBmcm9tICcuL2RlZmluZVByb3BlcnRpZXMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIE1hcFxuICogQHNlZSBbTWFwIHwgTUROXXtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9NYXB9XG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb259IGRlZmF1bHRSZXNvbHZlclxuICogQHJldHVybiB7P30gVGhlIGZpcnN0IGFyZ3VtZW50XG4gKi9cbmNvbnN0IGRlZmF1bHRSZXNvbHZlciA9ICguLi5hcmdzKSA9PiBhcmdzWzBdO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGNhY2hlcyB0aGUgdmFsdWUgcmV0dXJuZWQgYnkge0Bjb2RlIGZufVxuICogQHNpbmNlIDAuMS4wXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gbWVtb2l6ZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3Jlc29sdmVyPVtkZWZhdWx0UmVzb2x2ZXJde0BsaW5rIG1vZHVsZTptZW1vaXplfmRlZmF1bHRSZXNvbHZlcn1dIC0gQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGNhY2hlIGtleVxuICogQHBhcmFtIHtNYXB9IFtjYWNoZT1bTWFwXXtAbGluayBtb2R1bGU6bWVtb2l6ZX5NYXB9XSAtIEEge0Bjb2RlIE1hcH0sIG9yIGFueSBvYmplY3QgdGhhdCBpbXBsZW1lbnRzIHRoZSBbTWFwXXtAbGluayBtb2R1bGU6bWVtb2l6ZX5NYXB9IGludGVyZmFjZVxuICogQHJldHVybiB7ZnVuY3Rpb259XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1lbW9pemUoZm4sIHJlc29sdmVyID0gZGVmYXVsdFJlc29sdmVyLCBjYWNoZSA9IG5ldyBNYXAoKSkge1xuXHRyZXR1cm4gZGVmaW5lUHJvcGVydGllcyhcblx0XHQoLi4uYXJncykgPT4ge1xuXHRcdFx0Y29uc3Qga2V5ID0gcmVzb2x2ZXIoLi4uYXJncyk7XG5cdFx0XHRsZXQgdmFsdWU7XG5cdFx0XHRpZiAoY2FjaGUuaGFzKGtleSkpIHtcblx0XHRcdFx0dmFsdWUgPSBjYWNoZS5nZXQoa2V5KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbHVlID0gZm4oLi4uYXJncyk7XG5cdFx0XHRcdGNhY2hlLnNldChrZXksIHZhbHVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9LFxuXHRcdHsgY2FjaGUsIHJlc29sdmVyIH1cblx0KTtcbn1cbiJdfQ==