"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = once;

var _defineProperties = _interopRequireDefault(require("./defineProperties"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @typedef {function} cachedFunction
 * @property {function} clear - Clear the cache and allows cachedFunction to be called again
 * @return {?} The first result of {@code fn}
 */

/**
 * Creates a function that caches the first value returned by {@code fn}
 * @since 0.1.0
 *
 * @param {function} fn - The function to cache
 * @return {cachedFunction}
 *
 * @example
 * const cachedFunc = once(() => random(10));
 *
 * cachedFunc(); // => 8
 * cachedFunc(); // => 8
 *
 * cachedFunc.clear();
 *
 * cachedFunc(); // => 2
 */
function once(fn) {
  let result;
  let called;

  const clear = () => {
    called = false;
    result = undefined;
  };

  return (0, _defineProperties.default)((...args) => {
    if (!called) {
      called = true;
      result = fn(...args);
    }

    return result;
  }, {
    clear: {
      get: () => clear
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvaGVscGVycy9vbmNlLmpzIl0sIm5hbWVzIjpbIm9uY2UiLCJmbiIsInJlc3VsdCIsImNhbGxlZCIsImNsZWFyIiwidW5kZWZpbmVkIiwiYXJncyIsImdldCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7O0FBRUE7Ozs7OztBQU1BOzs7Ozs7Ozs7Ozs7Ozs7OztBQWlCZSxTQUFTQSxJQUFULENBQWNDLEVBQWQsRUFBa0I7QUFDaEMsTUFBSUMsTUFBSjtBQUNBLE1BQUlDLE1BQUo7O0FBQ0EsUUFBTUMsS0FBSyxHQUFHLE1BQU07QUFDbkJELElBQUFBLE1BQU0sR0FBRyxLQUFUO0FBQ0FELElBQUFBLE1BQU0sR0FBR0csU0FBVDtBQUNBLEdBSEQ7O0FBSUEsU0FBTywrQkFDTixDQUFDLEdBQUdDLElBQUosS0FBYTtBQUNaLFFBQUksQ0FBQ0gsTUFBTCxFQUFhO0FBQ1pBLE1BQUFBLE1BQU0sR0FBRyxJQUFUO0FBQ0FELE1BQUFBLE1BQU0sR0FBR0QsRUFBRSxDQUFDLEdBQUdLLElBQUosQ0FBWDtBQUNBOztBQUNELFdBQU9KLE1BQVA7QUFDQSxHQVBLLEVBUU47QUFBRUUsSUFBQUEsS0FBSyxFQUFFO0FBQUVHLE1BQUFBLEdBQUcsRUFBRSxNQUFNSDtBQUFiO0FBQVQsR0FSTSxDQUFQO0FBVUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lUHJvcGVydGllcyBmcm9tICcuL2RlZmluZVByb3BlcnRpZXMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbn0gY2FjaGVkRnVuY3Rpb25cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb259IGNsZWFyIC0gQ2xlYXIgdGhlIGNhY2hlIGFuZCBhbGxvd3MgY2FjaGVkRnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFnYWluXG4gKiBAcmV0dXJuIHs/fSBUaGUgZmlyc3QgcmVzdWx0IG9mIHtAY29kZSBmbn1cbiAqL1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGNhY2hlcyB0aGUgZmlyc3QgdmFsdWUgcmV0dXJuZWQgYnkge0Bjb2RlIGZufVxuICogQHNpbmNlIDAuMS4wXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gY2FjaGVcbiAqIEByZXR1cm4ge2NhY2hlZEZ1bmN0aW9ufVxuICpcbiAqIEBleGFtcGxlXG4gKiBjb25zdCBjYWNoZWRGdW5jID0gb25jZSgoKSA9PiByYW5kb20oMTApKTtcbiAqXG4gKiBjYWNoZWRGdW5jKCk7IC8vID0+IDhcbiAqIGNhY2hlZEZ1bmMoKTsgLy8gPT4gOFxuICpcbiAqIGNhY2hlZEZ1bmMuY2xlYXIoKTtcbiAqXG4gKiBjYWNoZWRGdW5jKCk7IC8vID0+IDJcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb25jZShmbikge1xuXHRsZXQgcmVzdWx0O1xuXHRsZXQgY2FsbGVkO1xuXHRjb25zdCBjbGVhciA9ICgpID0+IHtcblx0XHRjYWxsZWQgPSBmYWxzZTtcblx0XHRyZXN1bHQgPSB1bmRlZmluZWQ7XG5cdH07XG5cdHJldHVybiBkZWZpbmVQcm9wZXJ0aWVzKFxuXHRcdCguLi5hcmdzKSA9PiB7XG5cdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRyZXN1bHQgPSBmbiguLi5hcmdzKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSxcblx0XHR7IGNsZWFyOiB7IGdldDogKCkgPT4gY2xlYXIgfSB9XG5cdCk7XG59XG4iXX0=