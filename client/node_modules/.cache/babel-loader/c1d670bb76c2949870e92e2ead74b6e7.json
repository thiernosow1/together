{"ast":null,"code":"var _jsxFileName = \"/home/baht/together/client/src/components/home.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../assets/css/app.css\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport firebase from \"firebase\";\nimport firebaseConfig from \"../firebase/config\";\nimport { db, auth, storage } from \"../firebase/config\";\nimport Post from \"./post\";\nexport default class Home extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isSignedIn: true,\n      posts: []\n    };\n  }\n\n  componentDidMount() {\n    db.collection(\"posts\").get().then(snapshot => {\n      const posts = [];\n      snapshot.docs.forEach(doc => {\n        let post = doc.data();\n        post.id = doc.id;\n\n        if (post.author) {\n          post.author.get().then(res => {\n            post.author = res.data();\n            post.author.id = res.id;\n          }).catch(error => console.log(error));\n        }\n\n        if (post.challenge_ref) {\n          post.challenge_ref.get().then(res => {\n            post.challenge_ref = res.data();\n            post.challenge_ref.id = res.id;\n          }).catch(error => console.log(error));\n        }\n\n        posts.push(post);\n      }); //console.log(posts);\n    }).then(() => this.setState({\n      posts\n    })).catch(error => console.log(error));\n  }\n\n  displayPosts(posts) {\n    return posts.map(post => /*#__PURE__*/React.createElement(\"div\", {\n      key: post.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, \"auteur: \", post.author.login, \" \"), /*#__PURE__*/React.createElement(\"img\", {\n      src: post.picture_url,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, post.likes.lenght, \" likes\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, post.likes.created_at, \" likes\")));\n  }\n\n  render() {\n    const {\n      posts\n    } = this.state;\n    console.log(post);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/profil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n      alt: \"profil picture\",\n      className: \"avatar\",\n      src: \"/logout/avatar.svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }\n    }), \" \"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => firebase.auth().signOut(),\n      className: \"logout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"en-tete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }, \"D\\xE9couvrir\")), posts.length == 0 ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }\n    }, \" Aucune publications \") : this.displayPosts(posts), /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"nav_menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img1_b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"/post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"/subscription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"/defi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/baht/together/client/src/components/home.js"],"names":["React","Component","Link","StyledFirebaseAuth","firebase","firebaseConfig","db","auth","storage","Post","Home","state","isSignedIn","posts","componentDidMount","collection","get","then","snapshot","docs","forEach","doc","post","data","id","author","res","catch","error","console","log","challenge_ref","push","setState","displayPosts","map","login","picture_url","likes","lenght","created_at","render","signOut","length"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAO,uBAAP;AACA,OAAOC,kBAAP,MAA+B,qCAA/B;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,OAAOC,cAAP,MAA2B,oBAA3B;AACA,SAASC,EAAT,EAAaC,IAAb,EAAmBC,OAAnB,QAAkC,oBAAlC;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,eAAe,MAAMC,IAAN,SAAmBT,SAAnB,CAA6B;AAAA;AAAA;AAAA,SAC1CU,KAD0C,GAClC;AACNC,MAAAA,UAAU,EAAE,IADN;AAENC,MAAAA,KAAK,EAAE;AAFD,KADkC;AAAA;;AAM1CC,EAAAA,iBAAiB,GAAG;AAClBR,IAAAA,EAAE,CAACS,UAAH,CAAc,OAAd,EACGC,GADH,GAEGC,IAFH,CAESC,QAAD,IAAc;AAClB,YAAML,KAAK,GAAG,EAAd;AACAK,MAAAA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAuBC,GAAD,IAAS;AAC7B,YAAIC,IAAI,GAAGD,GAAG,CAACE,IAAJ,EAAX;AACAD,QAAAA,IAAI,CAACE,EAAL,GAAUH,GAAG,CAACG,EAAd;;AACA,YAAIF,IAAI,CAACG,MAAT,EAAiB;AACfH,UAAAA,IAAI,CAACG,MAAL,CACGT,GADH,GAEGC,IAFH,CAESS,GAAD,IAAS;AACbJ,YAAAA,IAAI,CAACG,MAAL,GAAcC,GAAG,CAACH,IAAJ,EAAd;AACAD,YAAAA,IAAI,CAACG,MAAL,CAAYD,EAAZ,GAAiBE,GAAG,CAACF,EAArB;AACD,WALH,EAMGG,KANH,CAMUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CANpB;AAOD;;AACD,YAAIN,IAAI,CAACS,aAAT,EAAwB;AACtBT,UAAAA,IAAI,CAACS,aAAL,CACGf,GADH,GAEGC,IAFH,CAESS,GAAD,IAAS;AACbJ,YAAAA,IAAI,CAACS,aAAL,GAAqBL,GAAG,CAACH,IAAJ,EAArB;AACAD,YAAAA,IAAI,CAACS,aAAL,CAAmBP,EAAnB,GAAwBE,GAAG,CAACF,EAA5B;AACD,WALH,EAMGG,KANH,CAMUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CANpB;AAOD;;AACDf,QAAAA,KAAK,CAACmB,IAAN,CAAWV,IAAX;AACD,OAtBD,EAFkB,CAyBlB;AACD,KA5BH,EA6BGL,IA7BH,CA6BQ,MAAM,KAAKgB,QAAL,CAAc;AAAEpB,MAAAA;AAAF,KAAd,CA7Bd,EA8BGc,KA9BH,CA8BUC,KAAD,IAAWC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CA9BpB;AA+BD;;AAEDM,EAAAA,YAAY,CAACrB,KAAD,EAAQ;AAClB,WAAOA,KAAK,CAACsB,GAAN,CAAWb,IAAD,iBACf;AAAK,MAAA,GAAG,EAAEA,IAAI,CAACE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAYF,IAAI,CAACG,MAAL,CAAYW,KAAxB,MADF,eAEE;AAAK,MAAA,GAAG,EAAEd,IAAI,CAACe,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIf,IAAI,CAACgB,KAAL,CAAWC,MAAf,WAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIjB,IAAI,CAACgB,KAAL,CAAWE,UAAf,WAJF,CADK,CAAP;AAQD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AAAE5B,MAAAA;AAAF,QAAY,KAAKF,KAAvB;AACAkB,IAAAA,OAAO,CAACC,GAAR,CAAYR,IAAZ;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,eAEE;AACE,MAAA,GAAG,EAAC,gBADN;AAEE,MAAA,SAAS,EAAC,QAFZ;AAGE,MAAA,GAAG,EAAC,oBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAMK,GANL,CADF,eASE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,QAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,OAAO,EAAE,MAAMlB,QAAQ,CAACG,IAAT,GAAgBmC,OAAhB,EADjB;AAEE,MAAA,SAAS,EAAC,QAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CATF,CADF,eAkBE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CAlBF,EAsBG7B,KAAK,CAAC8B,MAAN,IAAgB,CAAhB,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADD,GAGC,KAAKT,YAAL,CAAkBrB,KAAlB,CAzBJ,eA4BE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAJF,eAOE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,eAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAPF,eAUE,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAVF,CA5BF,CADF;AA6CD;;AAnGyC","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"../assets/css/app.css\";\nimport StyledFirebaseAuth from \"react-firebaseui/StyledFirebaseAuth\";\nimport firebase from \"firebase\";\nimport firebaseConfig from \"../firebase/config\";\nimport { db, auth, storage } from \"../firebase/config\";\nimport Post from \"./post\";\n\nexport default class Home extends Component {\n  state = {\n    isSignedIn: true,\n    posts: [],\n  };\n\n  componentDidMount() {\n    db.collection(\"posts\")\n      .get()\n      .then((snapshot) => {\n        const posts = [];\n        snapshot.docs.forEach((doc) => {\n          let post = doc.data();\n          post.id = doc.id;\n          if (post.author) {\n            post.author\n              .get()\n              .then((res) => {\n                post.author = res.data();\n                post.author.id = res.id;\n              })\n              .catch((error) => console.log(error));\n          }\n          if (post.challenge_ref) {\n            post.challenge_ref\n              .get()\n              .then((res) => {\n                post.challenge_ref = res.data();\n                post.challenge_ref.id = res.id;\n              })\n              .catch((error) => console.log(error));\n          }\n          posts.push(post);\n        });\n        //console.log(posts);\n      })\n      .then(() => this.setState({ posts }))\n      .catch((error) => console.log(error));\n  }\n\n  displayPosts(posts) {\n    return posts.map((post) => (\n      <div key={post.id}>\n        <p>auteur: {post.author.login} </p>\n        <img src={post.picture_url} />\n        <p>{post.likes.lenght} likes</p>\n        <p>{post.likes.created_at} likes</p>\n      </div>\n    ));\n  }\n\n  render() {\n    const { posts } = this.state;\n    console.log(post);\n    return (\n      <div className=\"home\">\n        <div className=\"header\">\n          <Link to=\"/profil\">\n            {\" \"}\n            <img\n              alt=\"profil picture\"\n              className=\"avatar\"\n              src=\"/logout/avatar.svg\"\n            />{\" \"}\n          </Link>\n          <Link to=\"/login\">\n            <button\n              onClick={() => firebase.auth().signOut()}\n              className=\"logout\"\n            ></button>\n          </Link>\n        </div>\n\n        <div className=\"en-tete\">\n          <h2>Découvrir</h2>\n        </div>\n\n        {posts.length == 0 ? (\n          <p> Aucune publications </p>\n        ) : (\n          this.displayPosts(posts)\n        )}\n\n        <nav className=\"nav_menu\">\n          <Link to=\"/home\">\n            <div className=\"img1_b\"></div>\n          </Link>\n          <Link to=\"/post\">\n            <div className=\"img2\"></div>\n          </Link>\n          <Link to=\"/subscription\">\n            <div className=\"img3\"></div>\n          </Link>\n          <Link to=\"/defi\">\n            <div className=\"img4\"></div>\n          </Link>\n        </nav>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}